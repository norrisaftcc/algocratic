<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delegation Protocol Training | ORANGE CLEARANCE</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Delegation-specific styles */
        .delegation-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
        }
        
        .bot-panel {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            padding: var(--space-lg);
            position: relative;
        }
        
        .bot-panel.flashbot {
            border-color: var(--term-cyan);
        }
        
        .bot-panel.thinkerbot {
            border-color: var(--term-green);
        }
        
        .bot-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-lg);
        }
        
        .bot-icon {
            font-size: 2rem;
            margin-right: var(--space-md);
        }
        
        .bot-title {
            flex: 1;
        }
        
        .bot-title h3 {
            margin: 0;
            color: var(--orange-primary);
        }
        
        .bot-subtitle {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
        
        .task-list {
            list-style: none;
            padding: 0;
            margin-bottom: var(--space-lg);
        }
        
        .task-item {
            background: var(--bg-primary);
            padding: var(--space-sm);
            margin-bottom: var(--space-sm);
            border-left: 3px solid transparent;
            cursor: move;
            transition: all 0.3s;
        }
        
        .task-item:hover {
            transform: translateX(5px);
        }
        
        .task-item.correct {
            border-left-color: var(--term-green);
        }
        
        .task-item.incorrect {
            border-left-color: var(--term-red);
        }
        
        .task-item.dragging {
            opacity: 0.5;
        }
        
        .drop-zone {
            min-height: 200px;
            border: 2px dashed var(--border-color);
            padding: var(--space-md);
            transition: all 0.3s;
        }
        
        .drop-zone.drag-over {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--orange-primary);
        }
        
        .exercise-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
        }
        
        .exercise-header {
            margin-bottom: var(--space-lg);
        }
        
        .exercise-tasks {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }
        
        .task-chip {
            background: var(--bg-tertiary);
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--border-color);
            cursor: grab;
            transition: all 0.3s;
        }
        
        .task-chip:active {
            cursor: grabbing;
        }
        
        .task-chip:hover {
            border-color: var(--orange-primary);
        }
        
        .progress-bar {
            height: 30px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            position: relative;
            margin-bottom: var(--space-lg);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--orange-dark), var(--orange-primary));
            width: 0%;
            transition: width 0.5s;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-primary);
            font-weight: bold;
        }
        
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }
        
        .pattern-card {
            background: var(--bg-tertiary);
            padding: var(--space-md);
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pattern-card:hover {
            border-color: var(--orange-primary);
            transform: translateY(-2px);
        }
        
        .pattern-card.selected {
            background: var(--orange-dark);
            border-color: var(--orange-primary);
        }
        
        .pattern-name {
            color: var(--orange-primary);
            font-weight: bold;
            margin-bottom: var(--space-sm);
        }
        
        .pattern-desc {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <div class="terminal-container">
        <!-- Header -->
        <header class="terminal-header">
            <div class="header-top">
                <span class="terminal-title">DELEGATION PROTOCOL TRAINING</span>
                <div class="status-indicators">
                    <span class="indicator active">MODULE: ACTIVE</span>
                    <span class="indicator" id="score-indicator">SCORE: 0</span>
                    <span class="indicator" id="time-indicator">TIME: 00:00</span>
                </div>
            </div>
            <div class="clearance-banner orange">
                <span class="blink">â–¶</span> DUAL-AGENT WORKFLOW OPTIMIZATION IN PROGRESS
            </div>
        </header>

        <!-- Main Content -->
        <main class="terminal-main">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
                <div class="progress-text" id="progress-text">0% Complete</div>
            </div>

            <!-- Bot Panels -->
            <div class="delegation-container">
                <div class="bot-panel flashbot">
                    <div class="bot-header">
                        <div class="bot-icon">ðŸŽ¯</div>
                        <div class="bot-title">
                            <h3>FLASHBOT</h3>
                            <div class="bot-subtitle">Rapid Ideation Unit</div>
                        </div>
                    </div>
                    <div class="drop-zone" id="flashbot-zone" data-bot="flashbot">
                        <p style="color: var(--text-dim); text-align: center;">Drop tasks here for rapid exploration</p>
                        <ul class="task-list" id="flashbot-tasks"></ul>
                    </div>
                    <div class="bot-stats">
                        <p>Best For:</p>
                        <ul style="color: var(--text-secondary); font-size: 0.8rem; margin-left: 20px;">
                            <li>Quick research sweeps</li>
                            <li>Brainstorming ideas</li>
                            <li>Finding documentation</li>
                            <li>Visual prototyping</li>
                        </ul>
                    </div>
                </div>

                <div class="bot-panel thinkerbot">
                    <div class="bot-header">
                        <div class="bot-icon">ðŸ§ </div>
                        <div class="bot-title">
                            <h3>THINKERBOT</h3>
                            <div class="bot-subtitle">Deep Analysis Unit</div>
                        </div>
                    </div>
                    <div class="drop-zone" id="thinkerbot-zone" data-bot="thinkerbot">
                        <p style="color: var(--text-dim); text-align: center;">Drop tasks here for deep implementation</p>
                        <ul class="task-list" id="thinkerbot-tasks"></ul>
                    </div>
                    <div class="bot-stats">
                        <p>Best For:</p>
                        <ul style="color: var(--text-secondary); font-size: 0.8rem; margin-left: 20px;">
                            <li>Code implementation</li>
                            <li>Complex debugging</li>
                            <li>Security audits</li>
                            <li>Architecture design</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Exercise Section -->
            <div class="exercise-container">
                <div class="exercise-header">
                    <h2 style="color: var(--orange-primary);">Exercise <span id="exercise-num">1</span> of 10</h2>
                    <p id="exercise-prompt" style="color: var(--text-primary); margin-top: 10px;">
                        Sort these tasks between FLASHBOT and THINKERBOT for optimal workflow:
                    </p>
                </div>
                
                <div class="exercise-tasks" id="exercise-tasks">
                    <!-- Tasks will be dynamically loaded here -->
                </div>

                <div style="display: flex; gap: var(--space-md); justify-content: center;">
                    <button class="module-btn" style="width: auto; padding: 10px 30px;" onclick="checkAnswer()">
                        CHECK ANSWER
                    </button>
                    <button class="module-btn" style="width: auto; padding: 10px 30px; background: var(--bg-tertiary);" onclick="resetExercise()">
                        RESET
                    </button>
                    <button class="module-btn" style="width: auto; padding: 10px 30px; background: var(--term-green);" onclick="nextExercise()" id="next-btn" disabled>
                        NEXT EXERCISE
                    </button>
                </div>
            </div>

            <!-- Pattern Recognition -->
            <div class="exercise-container">
                <h2 style="color: var(--orange-primary); margin-bottom: var(--space-lg);">Delegation Patterns</h2>
                <p style="color: var(--text-secondary); margin-bottom: var(--space-lg);">
                    Select the pattern that best describes this workflow scenario:
                </p>
                
                <div class="pattern-grid">
                    <div class="pattern-card" data-pattern="scout-sniper">
                        <div class="pattern-name">Scout & Sniper</div>
                        <div class="pattern-desc">FLASH explores vulnerabilities, THINK implements fixes</div>
                    </div>
                    <div class="pattern-card" data-pattern="researcher-builder">
                        <div class="pattern-name">Researcher & Builder</div>
                        <div class="pattern-desc">FLASH gathers info, THINK builds solution</div>
                    </div>
                    <div class="pattern-card" data-pattern="inspiration-implementation">
                        <div class="pattern-name">Inspiration & Implementation</div>
                        <div class="pattern-desc">FLASH generates ideas, THINK executes best one</div>
                    </div>
                    <div class="pattern-card" data-pattern="swarm">
                        <div class="pattern-name">The Swarm</div>
                        <div class="pattern-desc">Multiple FLASH queries feeding one THINK synthesis</div>
                    </div>
                    <div class="pattern-card" data-pattern="validation-loop">
                        <div class="pattern-name">Validation Loop</div>
                        <div class="pattern-desc">THINK builds, FLASH breaks, THINK hardens</div>
                    </div>
                    <div class="pattern-card" data-pattern="teaching-transformer">
                        <div class="pattern-name">Teaching Transformer</div>
                        <div class="pattern-desc">THINK explains technically, FLASH makes it fun</div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="exercise-container" id="results-section" style="display: none;">
                <h2 style="color: var(--term-green); margin-bottom: var(--space-lg);">Training Complete!</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="final-score">0</div>
                        <div class="metric-label">Final Score</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="accuracy">0%</div>
                        <div class="metric-label">Accuracy</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="completion-time">00:00</div>
                        <div class="metric-label">Time Taken</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="efficiency-rating">-</div>
                        <div class="metric-label">Efficiency Rating</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: var(--space-xl);">
                    <button class="module-btn" style="width: auto; padding: 15px 40px;" onclick="window.location.href='index.html'">
                        RETURN TO TRAINING HUB
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="terminal-footer">
            <div class="footer-content">
                <span>DELEGATION PROTOCOL v1.2.3</span>
                <span class="separator">|</span>
                <span>Remember: Two minds are better than one... when properly optimized</span>
            </div>
        </footer>
    </div>

    <script>
        // Delegation Training Logic
        let currentExercise = 1;
        let score = 0;
        let startTime = Date.now();
        let exercises = [];
        let currentTasks = [];

        // Exercise data
        const exerciseData = [
            {
                prompt: "You need to build a login system with security testing:",
                tasks: [
                    { text: "Research current auth best practices", correct: "flashbot" },
                    { text: "Implement JWT authentication", correct: "thinkerbot" },
                    { text: "Find examples of auth vulnerabilities", correct: "flashbot" },
                    { text: "Write the security audit code", correct: "thinkerbot" },
                    { text: "Generate test cases for edge cases", correct: "flashbot" },
                    { text: "Debug the refresh token logic", correct: "thinkerbot" }
                ]
            },
            {
                prompt: "Creating educational content about SQL injection:",
                tasks: [
                    { text: "10 creative ways to teach SQL injection", correct: "flashbot" },
                    { text: "Write the complete lesson plan", correct: "thinkerbot" },
                    { text: "Find recent SQL injection examples", correct: "flashbot" },
                    { text: "Implement the interactive demo", correct: "thinkerbot" },
                    { text: "Generate visual diagrams", correct: "flashbot" },
                    { text: "Create the assessment rubric", correct: "thinkerbot" }
                ]
            },
            {
                prompt: "Optimizing a React application performance:",
                tasks: [
                    { text: "Identify performance bottlenecks", correct: "flashbot" },
                    { text: "Implement code splitting", correct: "thinkerbot" },
                    { text: "Research lazy loading strategies", correct: "flashbot" },
                    { text: "Refactor component logic", correct: "thinkerbot" },
                    { text: "Find bundle size optimization tips", correct: "flashbot" },
                    { text: "Write performance tests", correct: "thinkerbot" }
                ]
            }
        ];

        // Initialize
        function init() {
            loadExercise(0);
            setupDragAndDrop();
            setupPatternCards();
            updateTimer();
        }

        // Load exercise
        function loadExercise(index) {
            const exercise = exerciseData[index % exerciseData.length];
            currentTasks = [...exercise.tasks];
            
            document.getElementById('exercise-prompt').textContent = exercise.prompt;
            document.getElementById('exercise-num').textContent = currentExercise;
            
            const tasksContainer = document.getElementById('exercise-tasks');
            tasksContainer.innerHTML = '';
            
            // Shuffle tasks
            const shuffled = [...currentTasks].sort(() => Math.random() - 0.5);
            
            shuffled.forEach((task, i) => {
                const chip = document.createElement('div');
                chip.className = 'task-chip';
                chip.draggable = true;
                chip.dataset.taskId = i;
                chip.dataset.correct = task.correct;
                chip.textContent = task.text;
                tasksContainer.appendChild(chip);
                
                // Add drag listeners
                chip.addEventListener('dragstart', handleDragStart);
                chip.addEventListener('dragend', handleDragEnd);
            });
            
            // Clear drop zones
            document.getElementById('flashbot-tasks').innerHTML = '';
            document.getElementById('thinkerbot-tasks').innerHTML = '';
        }

        // Drag and Drop
        function setupDragAndDrop() {
            const dropZones = document.querySelectorAll('.drop-zone');
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('drop', handleDrop);
                zone.addEventListener('dragleave', handleDragLeave);
            });
        }

        let draggedElement = null;

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            
            if (draggedElement && e.currentTarget.classList.contains('drop-zone')) {
                const bot = e.currentTarget.dataset.bot;
                const taskList = document.getElementById(`${bot}-tasks`);
                
                const taskItem = document.createElement('li');
                taskItem.className = 'task-item';
                taskItem.textContent = draggedElement.textContent;
                taskItem.dataset.correct = draggedElement.dataset.correct;
                taskItem.dataset.assigned = bot;
                
                taskList.appendChild(taskItem);
                draggedElement.remove();
            }
        }

        // Check answer
        function checkAnswer() {
            const flashbotTasks = document.querySelectorAll('#flashbot-tasks .task-item');
            const thinkerbotTasks = document.querySelectorAll('#thinkerbot-tasks .task-item');
            
            let correct = 0;
            let total = 0;
            
            flashbotTasks.forEach(task => {
                total++;
                if (task.dataset.correct === 'flashbot') {
                    task.classList.add('correct');
                    correct++;
                } else {
                    task.classList.add('incorrect');
                }
            });
            
            thinkerbotTasks.forEach(task => {
                total++;
                if (task.dataset.correct === 'thinkerbot') {
                    task.classList.add('correct');
                    correct++;
                } else {
                    task.classList.add('incorrect');
                }
            });
            
            const accuracy = Math.round((correct / total) * 100);
            score += correct * 10;
            
            document.getElementById('score-indicator').textContent = `SCORE: ${score}`;
            
            // Enable next button
            document.getElementById('next-btn').disabled = false;
            
            // Show feedback
            if (accuracy === 100) {
                showFeedback('PERFECT! Optimal delegation achieved.', 'success');
            } else if (accuracy >= 70) {
                showFeedback('Good work! Minor optimization needed.', 'warning');
            } else {
                showFeedback('Suboptimal delegation. Review bot capabilities.', 'error');
            }
            
            updateProgress();
        }

        // Reset exercise
        function resetExercise() {
            loadExercise(currentExercise - 1);
        }

        // Next exercise
        function nextExercise() {
            if (currentExercise >= 10) {
                showResults();
            } else {
                currentExercise++;
                loadExercise(currentExercise - 1);
                document.getElementById('next-btn').disabled = true;
            }
        }

        // Update progress
        function updateProgress() {
            const progress = (currentExercise / 10) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = progress + '% Complete';
            
            // Save to localStorage
            localStorage.setItem('delegationProgress', progress);
        }

        // Pattern cards
        function setupPatternCards() {
            const cards = document.querySelectorAll('.pattern-card');
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    cards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        }

        // Timer
        function updateTimer() {
            setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('time-indicator').textContent = 
                    `TIME: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Show feedback
        function showFeedback(message, type) {
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--bg-secondary);
                border: 2px solid ${type === 'success' ? 'var(--term-green)' : type === 'warning' ? 'var(--term-amber)' : 'var(--term-red)'};
                padding: 30px;
                z-index: 1000;
                box-shadow: 0 0 30px ${type === 'success' ? 'rgba(0, 255, 65, 0.5)' : type === 'warning' ? 'rgba(255, 176, 0, 0.5)' : 'rgba(255, 48, 48, 0.5)'};
            `;
            feedback.innerHTML = `
                <h3 style="color: ${type === 'success' ? 'var(--term-green)' : type === 'warning' ? 'var(--term-amber)' : 'var(--term-red)'}; margin-bottom: 10px;">
                    ${type === 'success' ? 'SUCCESS' : type === 'warning' ? 'ACCEPTABLE' : 'SUBOPTIMAL'}
                </h3>
                <p>${message}</p>
            `;
            document.body.appendChild(feedback);
            
            setTimeout(() => feedback.remove(), 3000);
        }

        // Show results
        function showResults() {
            document.getElementById('results-section').style.display = 'block';
            document.querySelector('.exercise-container').style.display = 'none';
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('final-score').textContent = score;
            document.getElementById('accuracy').textContent = Math.round((score / 600) * 100) + '%';
            document.getElementById('completion-time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Calculate efficiency rating
            let rating = 'NEEDS IMPROVEMENT';
            if (score >= 500 && elapsed < 300) rating = 'OPTIMAL';
            else if (score >= 400 && elapsed < 600) rating = 'ACCEPTABLE';
            else if (score >= 300) rating = 'ADEQUATE';
            
            document.getElementById('efficiency-rating').textContent = rating;
            
            // Save best time
            const bestTime = localStorage.getItem('delegationBestTime');
            if (!bestTime || elapsed < parseInt(bestTime)) {
                localStorage.setItem('delegationBestTime', elapsed);
                localStorage.setItem('delegationBestTimeFormatted', 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`);
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>